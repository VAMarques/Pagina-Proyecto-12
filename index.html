<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Bland Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #F5F5F5;
        }

        header, section, footer {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #C4B7D7;
            border-radius: 5px;
        }

        table {
            width: 300px;
            margin: 0 auto;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        tr:nth-child(even) {
            background-color: rgba(221, 221, 221, 0.5);
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
        }

        h1, h2, p, li{
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <header>
        <h1>Proyecto de Ciencia de Datos, Grupo 12</h1>
        <h1>Clustering de usuarios de MyAnimeList:<br>
          Hallando patrones y tendencias por comunidad</h1>
    </header>

    <section>
        <h2>Motivacion.</h2>
        <p>
           A algunos podria parecerle extraña la idea de hacer un analisis de este tipo,
           pero pensando que los adolescentes y jovenes adultos son su principal
           consumidor, y que Chile es el quinto pais que mas consume Anime,
           <a href="https://www.example.com">(Ferjan, 2023)</a>,
           Hacer un proyecto en torno a algo que nos interesa a nosotros y al resto del
           pais resulta atractivo.
        </p>
        <p>
            Otra de las razones es el potencial de la Ciencia de Datos en este entorno, no
            deberia ser un secreto que uno de los grandes mercados de la Ciencia de Datos
            son los algoritmos de recomendacion a usuarios, usados generalmente en
            sitios de peliculas como Netflix, o en los distintos algoritmos de publicidad.
        </p>
        <p>
            Esto es relevante en el anime pues uno de los sitios que los usuarios usan en
            este grupo de interes es MyAnimeList, el cual cuenta con aproximadamente
            17 millones de usuarios, esto representa una oportunidad, pues el mismo sitio
            provee una API con la cual acceder a esta informacion, lo cual implica que
            nosotros mismos seremos capaces de acceder a ella.
        </p>
        <p>
            Pero no simplemente vamos a tratar de hacer un algoritmo de recomendacion,
            si no mas bien, vamos a buscar distintos grupos dentro de este sitio, con lo cual
            queremos ver si estos usuarios se encuentran polarizados en sus gustos.
        </p>
    </section>

    <section>
        <h2>Información recolectada</h2>
        <p>
            El proyecto lo desarollamos con Python en varios Jupyter Notebook, con
            varias librerias especializadas en Ciencia de Datos, como Pandas, Numpy, Matplotlib,
            sklearn, etc. Y otras librerias para manejar el webscraping y el uso de API's, como
            requests y BeautifulSoup.
        </p>
        <p>
            Para la recoleccion de informacion usamos requests y BeautifulSoup, debido a la
            cantidad de tiempo que se toma recopilar la informacion lo hicimos por 20 partes
            cada serie, con un total de 5 series, el tiempo de procesamiento fue probablemente
            mas de 100 horas en total considerando todas las series.
        </p>
        <p>
            La informacion que recolectamos fue la siguiente:
        <p>
        <ul>
            <li>Las listas de  calificaciones de 20 mil usuarios, de las cuales aproximadamente
                7000 tenian al menos una calificacion a un anime que hayan completado. Esto fue
                hecho en 2 series, una para tener los usuarios y una segunda para obtener sus
                calificaciones.</li>
            <li>Detalles de los animes calificados por los usuarios en MyAnimeList, como su id,
                año de lanzamiento, cantidad de usuarios por ese anime, la calificiacion promedio,
                etc.</li>
            <li>La informacion de los Animes presentes en Animeplanet, otro sitio que recopila
                Informacion de distintos animes, en este caso sacamos informacion de este sitio
                Debido a la mejor calidad de sus tags, tambien conocidas como generos,
                las cuales tenian una mayor variedad en cuanto a tipo, clasificando asi mejor
                los distintos animes.<br>Esta tambien fue hecha en 2 series, una para encontrar
                todos los animes de AnimePlanet y una segunda para obtener las tags.</li>
        </ul>
        <p>
            Una vez que recopilamos toda la informacion la recopilamos en archivos unicos
            para su posterior procesamiento.
        </p>
    </section>
    <section>
        <h2>Procesamiento de informacion</h2>
        <p>
            Una vez recolectada esa informacion, pasamos a la parte de procesamiento, lo primero queremos
            hicimos fue convertirla generalmente a formatos mas amigables.
        </p>
        <p>Por ejemplo:<p>
        <ul>
            <li>Las listas de calificaciones por usuario se convirtieron a la forma de una.
                matriz, llamada <strong>users_df</strong>, con el siguiente formato:<br><br>
                <table>
                    <tr>
                        <th></th>
                        <th>Anime_1</th>
                        <th>Anime_2</th>
                        <th>...</th>
                    </tr>
                    <tr>
                        <td>User_1</td>
                        <td>1</td>
                        <td>10</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>User_2</td>
                        <td>6</td>
                        <td>NaN</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                    </tr>
                </table><br>
                Donde cada columna representa un anime y cada fila un usuario, y cada valor es
                la calificacion que el usuario le dio, NaN significa que el usuario no lo califico,
                Y en nuestro caso, tambien significa que no lo vio completo.
            </li>
            <li>Los detalles de los distintos animes se convirtieron a una tabla llamada
                <strong>detalles_anime</strong>, no es apropiado nombrar a esta una matriz,
                pues no es estrictamente numerica.<br>
                Para cada anime, contiene:<br><br>
                <table style="width: 500px; border-collapse: collapse; margin: 0 auto;">
                    <tr>
                        <th>Columna</th>
                        <th>Descripción</th>
                    </tr>
                    <tr>
                        <td>id</td>
                        <td>El id del anime</td>
                    </tr>
                    <tr>
                        <td>title</td>
                        <td>El nombre del anime</td>
                    </tr>
                    <tr>
                        <td>main_picture</td>
                        <td>la url hacia su imagen</td>
                    </tr>
                    <tr>
                        <td>alternative_titles</td>
                        <td>nombres alternativos.</td>
                    </tr>
                    <tr>
                        <td>start_date, end_date</td>
                        <td>Fecha de inicio y de fin de la emisión respectivamente</td>
                    </tr>
                    <tr>
                        <td>synopsis</td>
                        <td>Una breve descripción de la trama.</td>
                    </tr>
                    <tr>
                        <td>mean</td>
                        <td>El promedio de calificaciones.</td>
                    </tr>
                    <tr>
                        <td>rank</td>
                        <td>Su posicionamiento respecto a su promedio de calificación, el mean.</td>
                    </tr>
                    <tr>
                        <td>popularity</td>
                        <td>Su posicionamiento respecto a la siguiente columna, num_list_users.</td>
                    </tr>
                    <tr>
                        <td>num_list_users</td>
                        <td>Cuantos usuarios la tienen en su lista, Hayan calificado o terminado de ver el anime, o no.</td>
                    </tr>
                    <tr>
                        <td>num_scoring_users</td>
                        <td>Cuantos usuarios la han calificado.</td>
                    </tr>
                    <tr>
                        <td>media_type</td>
                        <td>Indica si fue emitido por television (tv), si para consumo directo en el hogar (ova), si era un
                            video musical (music), si era una pelicula (movie), etc...</td>
                    </tr>
                    <tr>
                        <td>status</td>
                        <td>Indica si sigue o no en emision.</td>
                    </tr>
                    <tr>
                        <td>num_episodes</td>
                        <td>La cantidad de episodios.</td>
                    </tr>
                    <tr>
                        <td>start_season</td>
                        <td>Año y temporada de emision, en la industria del anime la temporada es una caracteristica
                            importante, si, se refiere a si salio en invierno, otoño, verano, primavera, ademas de
                            contener el año.</td>
                    </tr>
                    <tr>
                        <td>studios</td>
                        <td>Las empresas, en este caso llamadas estudios, que estuvieron involucradas en la produccion.</td>
                    </tr>
                </table>
            </li><br>
            <li>La informacion de AnimePlanet tambien se proceso, utilizamos una base de Datos
                externa, la cual enlaza id's de MyAnimeList con las URL de AnimePlanet para
                poder tener las id's en esta tabla, debido a esta union entre ambos sitios,
                esta matriz recibe el nombre de <strong>unified_df</strong>, sus columnas son:<br><br>
                <table style="width: 500px; border-collapse: collapse; margin: 0 auto;">
                    <tr>
                        <th>Columna</th>
                        <th>Descripción</th>
                    </tr>
                    <tr>
                        <td>Anime</td>
                        <td>El nombre del anime</td>
                    </tr>
                    <tr>
                        <td>URL</td>
                        <td>La URL hacia ese anime en AnimePlanet</td>
                    </tr>
                    <tr>
                        <td>Tags</td>
                        <td>Todas las tags que tiene el anime</td>
                    </tr>
                    <tr>
                        <td>Alts</td>
                        <td>Nombres alternativos para el anime.</td>
                    </tr>
                    <tr>
                        <td>id</td>
                        <td>La id que lo relaciona con MyAnimeList</td>
                    </tr>
                </table>
            </li><br>
            <li><strong>unified_df</strong> en cierto punto del proyecto es transformada en una matriz,
                provocando que sus columnas sean todos los tags de Animeplanet y sus filas sean todos los
                Animes con los que estamos trabajando en el proyecto.
                Esta tiene el siguiente formato:<br><br>
                <table>
                    <tr>
                        <th></th>
                        <th>Tag_1</th>
                        <th>Tag_2</th>
                        <th>...</th>
                    </tr>
                    <tr>
                        <td>Anime_1</td>
                        <td>1</td>
                        <td>0</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>Anime_2</td>
                        <td>0</td>
                        <td>1</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                    </tr>
                </table><br>
                Donde cada columna representa un genero/tag y cada fila un anime con su id
                de MyAnimeList.<br>Por cada dato tiene un 0 indicando que el Anime no
                tiene esa tag y un 1 indicando que si la tiene.
            </li>
            <li>Finalmente, como las matrices <strong>users_df</strong> y <strong>unified_df</strong> ahora comparten id's
                de anime, podemos hacer una multiplicacion matricial entre ambas respecto a este dato.<br><br>
                Esta nueva matriz, que representa los gustos de anime, se llama <strong>cluster_df</strong>, y es la que sera usada
                para nuestra meta de agrupar usuarios.:<br><br>
                <table>
                    <tr>
                        <th></th>
                        <th>Tag_1</th>
                        <th>Tag_2</th>
                        <th>...</th>
                    </tr>
                    <tr>
                        <td>User_1</td>
                        <td>613</td>
                        <td>7</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>User_2</td>
                        <td>18</td>
                        <td>0</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                    </tr>
                </table><br>
                Donde cada columna representa un genero/tag y cada fila un usuario.<br>
                Por cada dato tiene la suma de calificaciones de animes que tenian esa tag.<br>
                Por ejemplo, el User_1 ve mucho anime, y da altas calificaciones, y por tanto
                su puntaje en la tag_1 es de 613.<br>
                En cambio, la tag_2 es menos popular, y como User_2 no ha calificado mucho anime,
                su puntaje es de 0.<br><br>
                Como queremos agrupar los usuarios por gustos, no queremos que ver mucho anime cambie
                tu gusto, por tanto, normalizamos esta matriz tal que cada usuario sume 1 en sus gustos,
                esto se hace dividiendo por la suma de sus gustos, queda entonces algo asi:<br><br>
                <table>
                    <tr>
                        <th></th>
                        <th>Tag_1</th>
                        <th>Tag_2</th>
                        <th>...</th>
                    </tr>
                    <tr>
                        <td>User_1</td>
                        <td>0.6</td>
                        <td>0.007</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>User_2</td>
                        <td>0.4</td>
                        <td>0</td>
                        <td>...</td>
                    </tr>
                    <tr>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                        <td>...</td>
                    </tr>
                </table><br>
            </li>
        </ul>
    </section>
  
    <section>
        <h2>Analisis de informacion y resultados.</h2>
        <p>
            Con estos distintos conjuntos de datos, empezamos a responder ciertas preguntas que
            teniamos.
        </p>
        <h3>Ley de Pareto en los animes y usuarios.</h3>
        <p>
            La primera de estas que pudimos responder era sobre si los usuarios siguen la ley de pareto,
            la cual dice que el 80% de los efectos proviene del 20% de las causas.
        </p>
        <p>
            En nuestro caso, la ley de Pareto diría que el 20% de los usuarios hace 80% de las
            calificaciones, o que el 20% de los anime tienen el 80% de las calificaciones.
        </p>
        <p>
            Simplemente calculando en <strong>users_df</strong> la cantidad de reviews hechas por usuario,
            tuvimos el siguiente resultado.
        </p>
        <img src="assets/img/reviews_por_usuario.png" width="300" height="200">
        <p>
            Los resultados dicen:<br>
            <em>El 20% de los usuarios tiene 387989 calificaciones, lo cual es un 69.53% del total</em><br>
            <em>El 80% de los usuarios tiene 170050 calificaciones, lo cual es un 30.47% del total</em><br>
            Lo cual a pesar de no ser exactamente 80-20, si es bastante cercano, especialmente tomando en
            cuenta que nuestra recoleccion de informacion no podia tener mas de 1000 animes por usuario.<br>
            Por tanto, podemos decir que la ley de Pareto se cumple en este caso.
        </p>
        <p>Podemos probar a hacer lo mismo pero desde la perpectiva de los mismos anime.</p>
        <img src="assets/img/reviews_por_anime.png" width="300" height="200">
        <p>
            Los resultados dicen:<br>
            <em>El 20% de los anime tiene 479727 calificaciones, lo cual es un 85.97% del total</em><br>
            <em>El 80% de los anime tiene 78312 calificaciones, lo cual es un 14.03% del total</em><br>
            Lo cual a pesar de no ser exactamente 80-20, si es bastante cercano, especialmente tomando en
            cuenta que nuestra recoleccion de informacion no podia tener mas de 1000 animes por usuario.<br>
            Por tanto, podemos decir que la ley de Pareto se cumple en este caso.
        </p>
        <p>
            Desafortunadamente, la version entregada del proyecto presentaba algunas fallas en estos graficos,
            algunos graficos estaban mal hechos y mal graficados.
        </p>
        <h3>Animes de culto.</h3>
        <p>
            Lo segundo que pudimos hacer fue encontrar los distintos animes de culto, encontramos estadisticamente
            este conjunto de animes, los cuales tienen la caracteristica de ser antiguos pero populares.
        </p>
        <img src="assets/img/animes_destacados.png">
        <p>
            Estos fueron encontrados con la informacion dentro de <strong>detalles_anime</strong>.
        </p>
        <h3>Generos mas y menos correlacionados.</h3>
        <p>
            Primero veamos los mas correlacionados.
        </p>
        <table style="width: 500px; border-collapse: collapse; margin: 0 auto;">
            <tr>
                <th>Generos mas<br>relacionados.</th>
                <th>Genero 1</th>
                <th>Genero 2</th>
                <th>Porcentaje de<br>correlacion.</th>
            </tr>
            <tr>
                <td>1</td>
                <td>BL</td>
                <td>Shounen-ai</td>
                <td>96.9%</td>
            </tr>
            <tr>
                <td>2</td>
                <td>GL</td>
                <td>Shoujo-ai</td>
                <td>96.6%</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Earthquake</td>
                <td>Natural Disaster</td>
                <td>93.5%</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Running</td>
                <td>Track and Field</td>
                <td>81.6%</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Sentai</td>
                <td>Tokusatsu</td>
                <td>81.6%</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Kingdom Building</td>
                <td>Management</td>
                <td>78.3%</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Boarding House</td>
                <td>Neighbors</td>
                <td>76.7%</td>
            </tr>
            <tr>
                <td>8</td>
                <td>Art</td>
                <td>Art School</td>
                <td>76.5%</td>
            </tr>
            <tr>
                <td>9</td>
                <td>Adult Couples</td>
                <td>Mature Romance</td>
                <td>74.9%</td>
            </tr>
            <tr>
                <td>10</td>
                <td>Flower Shop</td>
                <td>Plants</td>
                <td>70.7%</td>
            </tr>
        </table>
        <p>
            Ahora los mas antirrelacionados.
        </p>
        <table style="width: 500px; border-collapse: collapse; margin: 0 auto;">
            <tr>
                <th>Generos menos<br>relacionados.</th>
                <th>Genero 1</th>
                <th>Genero 2</th>
                <th>Porcentaje de<br>correlacion.</th>
            </tr>
            <tr>
                <td>1</td>
                <td>Based on a Manga</td>
                <td>Original Work</td>
                <td>-32.8%</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Based on a Light Novel</td>
                <td>Based on a Manga</td>
                <td>-23.3%</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Original Work</td>
                <td>Shounen</td>
                <td>-19.9%</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Action</td>
                <td>Slice of Life</td>
                <td>-19.7%</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Fantasy</td>
                <td>Sci Fi</td>
                <td>-18.1%</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Action</td>
                <td>Comedy</td>
                <td>-17.5%</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Based on a Manga</td>
                <td>Based on a Video Game</td>
                <td>-17.0%</td>
            </tr>
            <tr>
                <td>8</td>
                <td>Seinen</td>
                <td>Shounen</td>
                <td>-16.2%</td>
            </tr>
            <tr>
                <td>9</td>
                <td>Action</td>
                <td>Romance</td>
                <td>-15.5%</td>
            </tr>
            <tr>
                <td>10</td>
                <td>Based on a Manga</td>
                <td>Based on a Visual Novel</td>
                <td>-14.5%</td>
            </tr>
        </table>
        <p>
            Estos resultados fueron obtenidos con <strong>unified_df</strong>.
        </p>
        <h3>Clustering de usuarios.</h3>
        <p>
            Finalmente, llegamos a la parte principal del proyecto, el clustering de usuarios.
        </p>
        <p>
            Para esto, usamos la matriz <strong>cluster_df</strong>, la cual contiene los gustos de los usuarios.
        </p>
        <p>
            Los resultados no son tan conclusivos, pero fuimos capaces de concluir que no solo la comunidad
            de anime tiene distintos gustos, si no que tambien difieren en cantidad de usuarios
            y su nivel de consumo de anime.
        </p>
        <p>
            Para poder hacer esto, tuvimos que hacer una reduccion de dimensionalidad junto con un
            algoritmo de clustering, en este caso usamos PCA y KMeans respectivamente.
        </p>
        <div>
            <img src="assets/img/codo_pca.png" width="300" height="200">
            <img src="assets/img/codo_kmeans.png" width="300" height="200">
        </div>
        <p>
            Por el metodo del codo pudimos concluir que lo optimo fue usar 7 componentes principales, y aproximadamente 20 grupos, aunque un poco menos
            pudo haber sido un poco mas eficiente.
        </p>
        <p>
            A pesar de usar 7 componentes princiapales, lo cual implicaria 7 dimensiones para poder visualizar, por la naturaleza del Principal Component Analysis, los
            primeros componentes son tambien los mas significantes, por lo cual, fuimos capaces de graficar los 20 grupos en un grafico 3D de todas formas.
        </p>
        <p>
            Los graficos van de esta forma:
            <ul>
                <li>Pueden verse los distintos grupos unidos por lineas, que los llevan a distintos animes.</li>
                <li>Estan categorizados numericamente, pues algunos colores son dificiles de distinguir, sea por ejemplo el 5, 6, 7, 8, 9.</li>
                <li>Cada grupo tiene su propia breve descripcion, separados por las siguientes 3 macro-categorias.</li>
                <li>Casual: Grupo que en promedio ha visto de 0 a 10 animes.</li>
                <li>Estándar: Grupo que en promedio ha visto de 10 a 50 animes.</li>
                <li>Acérrimo: Grupo que en promedio ve mas de 50 animes.</li>
                <li>Debido a que algunos grupos cubren por encima otros, cada iteracion, o nivel, aumenta la transparancia de los grupos ya vistos.</li>
                <li>
                    Las imagenes tienen tal resolucion que si las abres en una pestaña nueva, podras hacer suficiente zoom como para poder ver los nombres de los
                    distintos animes de cada grupo.</li>
            </ul>
        </p>
        <img src="assets/img/PCA Nivel 1.png" width="500" height="400">
        <img src="assets/img/PCA Nivel 2.png" width="500" height="400">
        <img src="assets/img/PCA Nivel 3.png" width="500" height="400">
        <img src="assets/img/PCA Nivel 4.png" width="500" height="400">
    </section>

    <footer>
        <p>&copy; 2023 Your Bland Website. All rights reserved.</p>
    </footer>
</body>

</html>